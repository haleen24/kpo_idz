#### Приложение для работы с фильмами и сеансами показов для сотрудников кинотеатра

Для простоты дальнейшего объяснения, представим что в нашей базе данных лежит фильм `Barbie` и сеанс на фильм `Barbie` со временем `14:00 31-12-2023`, и что наш кинотеатр содержит всего 4 места (ряд-номер: { (1,1), (1,2), (2,1), (2,2) }).



Основной функционал:

1. [Регистрация](#Регистрация)
2. [Авторизация](#Авторизация)
3. [Продажа билетов](#Продажа-билетов)
4. [Возврат билетов](#Возврат-билетов)
5. [Отображение свободных и проданных мест для конкретного сеанса](#Отображение-свободных-и-проданных-мест-для-конкретного-сеанса)
6. [Добавление фильмов](#Добавление-фильма)
7. [Добавить сеанс](#Добавить-сеанс)
8. [Изменение расписания сеанса](#Изменение-расписания-сеанса)
9. [Удаление сеанса](#Удаление-сеанса)
10. [Изменение описания фильма](#Изменение-описания-фильма)
11. [Удаление фильма](#Удаление-фильма)
12. [Отметка занятых мест](#Отметка-занятых-мест)



[Немного о приложении](#Немного-о-приложении)



### Регистрация

1. В стартовом меню выберите `Регистрация` (введите `2`)
2. Введите логин и пароль через `enter` 

Если такой логин уже занят, об этом выводится сообщение и возвращает пользователя на экран выбора регистрации/авторизации

Если регистрация прошла успешно - вас перебросит на главное окно

Все пароли шифруются при помощи `SHA-256` из `java.security.MessageDigest`. 

### Авторизация

1. В стартовом меню выберите `Авторизация` (введите `1`)
2. Введите логин и пароль через `enter`

Если аккаунта не существует или пароль не верный выводится соответствующая ошибка

Если авторизация прошла успешно - вас перебросит на главное окно





### Продажа билетов

1. Выбор пункта продажа билетов - введите `1` в консоль на главном экране

2. [Выберите сеанс](#выбор-сеанса)

3. [Вводите место](#Ввод-места)

   Если место уже занято, то выведется сообщение `Невозможно продать билет`, иначе - `Успешно`. После вас отправит на главный экран

   Невозможно продать билет на сеанс, который уже прошел

   Невозможно продать билет на одно место дважды (кроме случая возврата билета на место с последующей его продажей)





### Возврат билетов:

1. Выбор пункта возврат билетов - введите `2` в консоль на главном экране

2. [Выберите сеанс](#Выбор-сеанса)

3. [Вводите место](#Ввод-места)

   Если билет не был куплен на это место, то выведется сообщение `Не возможно вернуть билет`, иначе - `Успешно`

   Невозможно вернуть билет на сеанс, который уже прошел

   Невозможно вернуть билет, если до этого он не был куплен





### Отображение свободных и проданных мест для конкретного сеанса:

1. Выберите соответствующий пункт - введите `3` в консоль на главном меню
2. [Выберите сеанс](#Выбор-сеанса)
3. [Введите имя файла для отображения](#Ввод-имени-файла-для-отображения)

Отображение происходит в виде файла с информацией в виде `Json` сериализованных данных о местах. Значение `isBought` указывает на то, был ли куплен билет: `true` - был куплен, иначе не был. `isOccupied` указывает на то, было ли занято место после его покупки. 

Послу записи появится сообщение `Успешно`.

Файл в проекте в `IDE` может появиться не сразу, легче проверить его через файловую систему





### Добавление фильма:

1. В главном меню выберите пункт `Редактирование данных о фильмах или сеансах их показа`  (введите `4`)
2.  В следующем меню выберите `Добавить фильм` (введите `2`)
3.  Введите название фильма
4.  Введите описание фильма

Стоит заметить, что могут существовать фильмы с одинаковым названием, но не могут с одинаковым названием И одинаковым описанием.





### Добавить сеанс:

1. В главном меню выберите пункт `Редактирование данных о фильмах или сеансах их показа`  (введите `4`)
2. В следующем меню выберите `Изменить существующий фильм или сеанс` (введите `1`)
3. Введите название фильма из предложенных 
4. Выберите `Добавить сеанс` (введите `1`)
5. [Введите время сеанса](#Ввод-времени)

Если уже существует сеанс ЛЮБОГО фильма с таким временем, то операция будет отклонена, в силу того, что зал всего один





### Изменение расписания сеанса:

1. В главном меню выберите пункт `Редактирование данных о фильмах или сеансах их показа`  (введите `4`)
2. В следующем меню выберите `Изменить существующий фильм или сеанс` (введите `1`)
3. Введите название фильма из предложенных 
4. Выберите `Изменить расписание сеанса` (введите `2`)
5. [Выберите сеанс](#Выбор-сеанса)
6. [Введите новое время](#Ввод-времени)





### Удаление сеанса:

1. В главном меню выберите пункт `Редактирование данных о фильмах или сеансах их показа`  (введите `4`)
2. В следующем меню выберите `Изменить существующий фильм или сеанс` (введите `1`)
3. Введите название фильма из предложенных
4. Выберите `Удалить сеанс` (введите `3`)
5. [Выберите сеанс](#Выбор-сеанса)

Если такого сеанса не существует - операция отклонится.





### Изменение описания фильма:

1. В главном меню выберите пункт `Редактирование данных о фильмах или сеансах их показа`  (введите `4`)
2. В следующем меню выберите `Изменить существующий фильм или сеанс` (введите `1`)
3. Введите название фильма из предложенных
4. Выберите `Изменить описание фильма` (введите `4`)
5. Введите новое описание в строчку





### Удаление фильма:

1. В главном меню выберите пункт `Редактирование данных о фильмах или сеансах их показа`  (введите `4`)
2. В следующем меню выберите `Изменить существующий фильм или сеанс` (введите `1`)
3. Введите название фильма из предложенных
4. Выберите `Удалить фильм` (введите `5`)

В случае, если удаление произошло - будет выведено `Успешно удалено`. При удалении фильма, удаляются все связанные с ним сеансы.





### Отметка занятых мест:

1. В главном меню выберите пункт `Отметка занятых мест` (введите `5`)
2. [Выберите сеанс](#Выбор-сеанса)
3. [Вводите места](#Ввод-места) через enter. Для выхода введите любую последовательность символов, не являющуюся двумя числами через пробел

Если место не было выкуплено - то его нельзя занять

Если место было занято - то повторно его нельзя занять





##### Выбор сеанса:

Приложение предложит вам список сеансов в виде: `Имя фильма` `Дата сеанса`.  Для того чтобы получить нужный вам сеанс, введите его время в формате: `минута час день месяц год`. Для того чтобы выбрать сеанс из примера (`Barbie 0 14 31 12 2023`) необходимо ввести `0 14 31 12 2023`.

Если введено несуществующее время сеанса - тогда программа отправит вас на главный экран

##### Ввод места:

Введите два числа: ряд и номер места через пробел. Допустим мы выбрали наш сеанс из примера и хотим выбрать место с рядом 1 и номером 2. Тогда ввести необходимо `1 2` 

В случае, если место не принадлежит заранее объявленному залу (выходит за его границы), программа вернет сообщение о том, что такого места нет и вернет вас на главный экран. 

##### Ввод имени файла для отображения:

Введите название файла без расширения, в который вы хотите отобразить данные. Если файла не существует, он будет создан. 

##### Ввод времени:

Аналогичен [выбору сеанса](#выбор-сеанса)

Если переданы не валидные аргументы (их меньше, или они не  числа), то операция отменяется





### Немного о приложении:

* Выходом из любого пункта выбора является неверно введенный пункт выбора:). Неверно выбранный пункт на главном меню считается выходом из программы. 

* По умолчанию в кинозале всего 4 места. Это можно изменить в `Main.kt`. Решено не делать изменения в `runtime` т. к. сотрудник не должен иметь права менять физический размер кинозала. При изменении размера, база данных сеансов инвалидируется, т.к. инвалидируется информация о проданных/свободных местах. 4 места поставлены для удобства, чтобы было хорошо видно выводимые данные

* Отображение проданных/не проданных билетов сделано в отдельный файл, для того чтобы упростить его чтение (прочитать в консоли сеанс с большим количеством мест не удобно). 

* Json сериализация выбрана потому что:

1. Просто сериализуется
2. Просто десериализуется
3. Json файлы легко читаемы для человека

* Приложение работает на основе консольного интерфейса, построенного на окнах, имплементирующих интерфейс `Window`. В силу сжатых сроков для реализации интерфейса в некоторых местах были выбраны не лучшие архитектурные решения, прошу учитывать это:). После добавления или изменения каталога фильмов или сеансов, происходит пересборка меню (не лучшее архитектурное решение, каюсь)
* Введение сеансов/времени сделано так, потому что других вариантов, не приводящих к усложнению консольного приложения придумано не было